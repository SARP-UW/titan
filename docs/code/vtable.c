/**
 * This file is part of the Titan Project.
 * Copyright (c) 2025 UW SARP
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, version 3.
 * 
 * This program is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 * General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 * 
 * @file modules/core/src/vtable.c
 * @authors Aaron McBride
 * @brief Contains armv7m vector table definitions.
 */

#pragma once
#include <stdint.h>
#include "core/interrupt.h"

/** @brief Size of the interrupt vector table. */
#define VTABLE_SIZE 256

/** @brief Interrupt vector table (CM7 core). */
__attribute__((used, section(".cm7_vtable")))
static const uint32_t cm7_vtable[VTABLE_SIZE] = {
  [0]   = (uint32_t)&cm7_reset_exc_handler,
  [1]   = (uint32_t)&cm7_nmi_exc_handler,
  [2]   = (uint32_t)&cm7_hard_fault_exc_handler,
  [3]   = (uint32_t)&cm7_mem_manage_exc_handler,
  [4]   = (uint32_t)&cm7_bus_fault_exc_handler,
  [5]   = (uint32_t)&cm7_usage_fault_exc_handler,
  [10]  = (uint32_t)&cm7_svc_exc_handler,
  [11]  = (uint32_t)&cm7_debug_mon_exc_handler,
  [13]  = (uint32_t)&cm7_pendsv_exc_handler,
  [14]  = (uint32_t)&cm7_systick_exc_handler,
  [15]  = (uint32_t)&wwdg1_irq_handler,
  [16]  = (uint32_t)&pvd_pvm_irq_handler,
  [17]  = (uint32_t)&rtc_tamp_stamp_css_lse_irq_handler,
  [18]  = (uint32_t)&rtc_wkup_irq_handler,
  [19]  = (uint32_t)&flash_irq_handler,
  [20]  = (uint32_t)&rcc_irq_handler,
  [21]  = (uint32_t)&exti0_irq_handler,
  [22]  = (uint32_t)&exti1_irq_handler,
  [23]  = (uint32_t)&exti2_irq_handler,
  [24]  = (uint32_t)&exti3_irq_handler,
  [25]  = (uint32_t)&exti4_irq_handler,
  [26]  = (uint32_t)&dma_str0_irq_handler,
  [27]  = (uint32_t)&dma_str1_irq_handler,
  [28]  = (uint32_t)&dma_str2_irq_handler,
  [29]  = (uint32_t)&dma_str3_irq_handler,
  [30]  = (uint32_t)&dma_str4_irq_handler,
  [31]  = (uint32_t)&dma_str5_irq_handler,
  [32]  = (uint32_t)&dma_str6_irq_handler,
  [33]  = (uint32_t)&adc1_2_irq_handler,
  [34]  = (uint32_t)&fdcan1_it0_irq_handler,
  [35]  = (uint32_t)&fdcan2_it0_irq_handler,
  [36]  = (uint32_t)&fdcan1_it1_irq_handler,
  [37]  = (uint32_t)&fdcan2_it1_irq_handler,
  [38]  = (uint32_t)&exti9_5_irq_handler,
  [39]  = (uint32_t)&tim1_brk_irq_handler,
  [40]  = (uint32_t)&tim1_up_irq_handler,
  [41]  = (uint32_t)&tim1_trg_com_irq_handler,
  [42]  = (uint32_t)&tim1_cc_irq_handler,
  [43]  = (uint32_t)&tim2_irq_handler,
  [44]  = (uint32_t)&tim3_irq_handler,
  [45]  = (uint32_t)&tim4_irq_handler,
  [46]  = (uint32_t)&i2c1_ev_irq_handler,
  [47]  = (uint32_t)&i2c1_er_irq_handler,
  [48]  = (uint32_t)&i2c2_ev_irq_handler,
  [49]  = (uint32_t)&i2c2_er_irq_handler,
  [50]  = (uint32_t)&spi1_irq_handler,
  [51]  = (uint32_t)&spi2_irq_handler,
  [52]  = (uint32_t)&usart1_irq_handler,
  [53]  = (uint32_t)&usart2_irq_handler,
  [54]  = (uint32_t)&usart3_irq_handler,
  [55]  = (uint32_t)&exti15_10_irq_handler,
  [56]  = (uint32_t)&rtc_alarm_irq_handler,
  [58]  = (uint32_t)&tim8_brk_tim12_irq_handler,
  [59]  = (uint32_t)&tim8_up_tim13_irq_handler,
  [60]  = (uint32_t)&tim8_trg_com_tim14_irq_handler,
  [61]  = (uint32_t)&tim8_cc_irq_handler,
  [62]  = (uint32_t)&dma1_str7_irq_handler,
  [63]  = (uint32_t)&fmc_irq_handler,
  [64]  = (uint32_t)&sdmmc1_irq_handler,
  [65]  = (uint32_t)&tim5_irq_handler,
  [66]  = (uint32_t)&spi3_irq_handler,
  [67]  = (uint32_t)&uart4_irq_handler,
  [68]  = (uint32_t)&uart5_irq_handler,
  [69]  = (uint32_t)&tim6_dac_irq_handler,
  [70]  = (uint32_t)&tim7_irq_handler,
  [71]  = (uint32_t)&dma2_str0_irq_handler,
  [72]  = (uint32_t)&dma2_str1_irq_handler,
  [73]  = (uint32_t)&dma2_str2_irq_handler,
  [74]  = (uint32_t)&dma2_str3_irq_handler,
  [75]  = (uint32_t)&dma2_str4_irq_handler,
  [76]  = (uint32_t)&eth_irq_handler,
  [77]  = (uint32_t)&eth_wkup_irq_handler,
  [78]  = (uint32_t)&fdcan_cal_irq_handler,
  [80]  = (uint32_t)&cpu2_sev_irq_handler,
  [83]  = (uint32_t)&dma2_str5_irq_handler,
  [84]  = (uint32_t)&dma2_str6_irq_handler,
  [85]  = (uint32_t)&dma2_str7_irq_handler,
  [86]  = (uint32_t)&usart6_irq_handler,
  [87]  = (uint32_t)&i2c3_ev_irq_handler,
  [88]  = (uint32_t)&i2c3_er_irq_handler,
  [89]  = (uint32_t)&otg_hs_ep1_out_irq_handler,
  [90]  = (uint32_t)&otg_hs_ep1_in_irq_handler,
  [91]  = (uint32_t)&otg_hs_wkup_irq_handler,
  [92]  = (uint32_t)&otg_hs_irq_handler,
  [93]  = (uint32_t)&dcmi_irq_handler,
  [94]  = (uint32_t)&cryp_irq_handler,
  [95]  = (uint32_t)&hash_rng_irq_handler,
  [96]  = (uint32_t)&cpu1_fpu_irq_handler,
  [97]  = (uint32_t)&uart7_irq_handler,
  [98]  = (uint32_t)&uart8_irq_handler,
  [99]  = (uint32_t)&spi4_irq_handler,
  [100] = (uint32_t)&spi5_irq_handler,
  [101] = (uint32_t)&spi6_irq_handler,
  [102] = (uint32_t)&sai1_irq_handler,
  [103] = (uint32_t)&ltdc_irq_handler,
  [104] = (uint32_t)&ltdc_er_irq_handler,
  [105] = (uint32_t)&dma2d_irq_handler,
  [106] = (uint32_t)&sai2_irq_handler,
  [107] = (uint32_t)&quadspi_irq_handler,
  [108] = (uint32_t)&lptim1_irq_handler,
  [109] = (uint32_t)&cec_irq_handler,
  [110] = (uint32_t)&i2c4_ev_irq_handler,
  [111] = (uint32_t)&i2c4_er_irq_handler,
  [112] = (uint32_t)&spdif_irq_handler,
  [113] = (uint32_t)&otg_fs_ep1_out_irq_handler,
  [114] = (uint32_t)&otg_fs_ep1_in_irq_handler,
  [115] = (uint32_t)&otg_fs_wkup_irq_handler,
  [116] = (uint32_t)&otg_fs_irq_handler,
  [117] = (uint32_t)&dmamux1_ov_irq_handler,
  [118] = (uint32_t)&hrtim_mst_irq_handler,
  [119] = (uint32_t)&hrtim_tima_irq_handler,
  [120] = (uint32_t)&hrtim_timb_irq_handler,
  [121] = (uint32_t)&hrtim_timc_irq_handler,
  [122] = (uint32_t)&hrtim_timd_irq_handler,
  [123] = (uint32_t)&hrtim_time_irq_handler,
  [124] = (uint32_t)&hrtim_flt_irq_handler,
  [125] = (uint32_t)&dfsdm1_flt0_irq_handler,
  [126] = (uint32_t)&dfsdm1_flt1_irq_handler,
  [127] = (uint32_t)&dfsdm1_flt2_irq_handler,
  [128] = (uint32_t)&dfsdm1_flt3_irq_handler,
  [129] = (uint32_t)&sai3_irq_handler,
  [130] = (uint32_t)&swpmi_irq_handler,
  [131] = (uint32_t)&tim15_irq_handler,
  [132] = (uint32_t)&tim16_irq_handler,
  [133] = (uint32_t)&tim17_irq_handler,
  [134] = (uint32_t)&mdios_wkup_irq_handler,
  [135] = (uint32_t)&mdios_irq_handler,
  [136] = (uint32_t)&jpeg_irq_handler,
  [137] = (uint32_t)&mdma_irq_handler,
  [139] = (uint32_t)&sdmmc2_irq_handler,
  [140] = (uint32_t)&hsem0_irq_handler,
  [142] = (uint32_t)&adc3_irq_handler,
  [143] = (uint32_t)&dmamux2_ovr_irq_handler,
  [144] = (uint32_t)&bdma_ch1_irq_handler,
  [145] = (uint32_t)&bdma_ch2_irq_handler,
  [146] = (uint32_t)&bdma_ch3_irq_handler,
  [147] = (uint32_t)&bdma_ch4_irq_handler,
  [148] = (uint32_t)&bdma_ch5_irq_handler,
  [149] = (uint32_t)&bdma_ch6_irq_handler,
  [150] = (uint32_t)&bdma_ch7_irq_handler,
  [151] = (uint32_t)&bdma_ch8_irq_handler,
  [152] = (uint32_t)&comp_irq_handler,
  [153] = (uint32_t)&lptim2_irq_handler,
  [154] = (uint32_t)&lptim3_irq_handler,
  [155] = (uint32_t)&lptim4_irq_handler,
  [156] = (uint32_t)&lptim5_irq_handler,
  [157] = (uint32_t)&lpuart_irq_handler,
  [158] = (uint32_t)&wwdg2_rst_irq_handler,
  [159] = (uint32_t)&crs_irq_handler,
  [161] = (uint32_t)&sai4_irq_handler,
  [163] = (uint32_t)&cpu1_hold_core_irq_handler,
  [164] = (uint32_t)&wkup_irq_handler,
};

/** @brief Interrupt vector table (CM4 core) */
__attribute__((used, section(".cm4_vtable")))
static const uint32_t cm4_vtable[VTABLE_SIZE] = {
  [0]   = (uint32_t)&cm4_reset_exc_handler,
  [1]   = (uint32_t)&cm4_nmi_exc_handler,
  [2]   = (uint32_t)&cm4_hard_fault_exc_handler,
  [3]   = (uint32_t)&cm4_mem_manage_exc_handler,
  [4]   = (uint32_t)&cm4_bus_fault_exc_handler,
  [5]   = (uint32_t)&cm4_usage_fault_exc_handler,
  [10]  = (uint32_t)&cm4_svc_exc_handler,
  [11]  = (uint32_t)&cm4_debug_mon_exc_handler,
  [13]  = (uint32_t)&cm4_pendsv_exc_handler,
  [14]  = (uint32_t)&cm4_systick_exc_handler,
  [15]  = (uint32_t)&wwdg2_irq_handler,
  [79]  = (uint32_t)&cpu1_sev_irq_handler,
  [96]  = (uint32_t)&cpu2_fpu_irq_handler,
  [141] = (uint32_t)&hsem1_irq_handler,
  [158] = (uint32_t)&wwdg1_rst_irq_handler,
  [163] = (uint32_t)&cpu2_hold_core_irq_handler,
};